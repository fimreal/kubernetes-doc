<!doctype html>
<html lang="zh" class="no-js">
  <head>
    

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>


<link rel="alternate" hreflang="en" href="https://kubernetes.io/docs/reference/scheduling/">
<link rel="alternate" hreflang="ko" href="https://kubernetes.io/ko/docs/reference/scheduling/">

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.88.1" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

<link rel="canonical" type="text/html" href="https://kubernetes.io/zh/docs/reference/scheduling/">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="manifest" href="/manifest.webmanifest">
<link rel="apple-touch-icon" href="/images/kubernetes-192x192.png">
<title>调度 | Kubernetes</title><meta property="og:title" content="调度" />
<meta property="og:description" content="生产级别的容器编排系统" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://kubernetes.io/zh/docs/reference/scheduling/" /><meta property="og:site_name" content="Kubernetes" />

<meta itemprop="name" content="调度">
<meta itemprop="description" content="生产级别的容器编排系统"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="调度"/>
<meta name="twitter:description" content="生产级别的容器编排系统"/>





<link rel="preload" href="/scss/main.min.0bda2f3af46d1514ab4d3cad78295716cfd9557a35a41868b7db38040502bb54.css" as="style">
<link href="/scss/main.min.0bda2f3af46d1514ab4d3cad78295716cfd9557a35a41868b7db38040502bb54.css" rel="stylesheet" integrity="">


<script
  src="/js/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>





<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "url": "https://kubernetes.io",
    "logo": "https://kubernetes.io/images/favicon.png",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://kubernetes.io/search/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }

  }
</script>
<meta name="theme-color" content="#326ce5">




<link rel="stylesheet" href="/css/feature-states.css">



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://kubernetes.io/zh/docs/reference/scheduling/">
<meta property="og:title" content="调度">
<meta name="twitter:title" content="调度">
<meta name="twitter:image" content="https://kubernetes.io/images/favicon.png" />

<meta name="twitter:image:alt" content="Kubernetes">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">



<script src="/js/script.js"></script>


  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark  flex-row td-navbar" data-auto-burger="primary">
        <a class="navbar-brand" href="/zh/"></a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			
			
			<li class="nav-item mr-2 mb-lg-0">
				
				<a class="nav-link active" href="/zh/docs/" >文档</span></a>
			</li>
			
			
			
			<li class="nav-item mr-2 mb-lg-0">
				
				<a class="nav-link" href="/zh/blog/" >Kubernetes 博客</span></a>
			</li>
			
			
			
			<li class="nav-item mr-2 mb-lg-0">
				
				<a class="nav-link" href="/zh/training/" >培训</span></a>
			</li>
			
			
			
			<li class="nav-item mr-2 mb-lg-0">
				
				<a class="nav-link" href="/zh/partners/" >合作伙伴</span></a>
			</li>
			
			
			
			<li class="nav-item mr-2 mb-lg-0">
				
				<a class="nav-link" href="/zh/community/" >社区</span></a>
			</li>
			
			
			
			<li class="nav-item mr-2 mb-lg-0">
				
				<a class="nav-link" href="/zh/case-studies/" >案例分析</span></a>
			</li>
			
			
			
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	版本列表
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/releases">Release Information</a>
	
	<a class="dropdown-item" href="https://kubernetes.io/zh/docs/reference/scheduling/">v1.22</a>
	
	<a class="dropdown-item" href="https://v1-21.docs.kubernetes.io/zh/docs/reference/scheduling/">v1.21</a>
	
	<a class="dropdown-item" href="https://v1-20.docs.kubernetes.io/zh/docs/reference/scheduling/">v1.20</a>
	
	<a class="dropdown-item" href="https://v1-19.docs.kubernetes.io/zh/docs/reference/scheduling/">v1.19</a>
	
	<a class="dropdown-item" href="https://v1-18.docs.kubernetes.io/zh/docs/reference/scheduling/">v1.18</a>
	
</div>
			</li>
			
			
			<li class="nav-item dropdown">
				

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	中文 Chinese
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/docs/reference/scheduling/">English</a>
	
	<a class="dropdown-item" href="/ko/docs/reference/scheduling/">한국어 Korean</a>
	
</div>

			</li>
			
		</ul>
	</div>
	<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
这是本节的多页打印视图。
<a href="#" onclick="print();return false;">点击此处打印</a>.
</p><p>
<a href="/zh/docs/reference/scheduling/">返回本页常规视图</a>.
</p>
</div>



<h1 class="title">调度</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-5a0a68fb6a7ffefb6d5f861100fa0ae3">调度策略</a></li>


    
  
    
    
	
<li>2: <a href="#pg-ef4fb938b6b63c95f5f26f9b1cec3054">调度器配置</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-5a0a68fb6a7ffefb6d5f861100fa0ae3">1 - 调度策略</h1>
    
	<!--  
title: Scheduling Policies
content_type: concept
weight: 10
-->
<!-- overview -->
<!--  
A scheduling Policy can be used to specify the *predicates* and *priorities*
that the <a class='glossary-tooltip' title='控制平面组件，负责监视新创建的、未指定运行节点的 Pod，选择节点让 Pod 在上面运行。' data-toggle='tooltip' data-placement='top' href='/docs/reference/generated/kube-scheduler/' target='_blank' aria-label='kube-scheduler'>kube-scheduler</a>
runs to [filter and score nodes](/docs/concepts/scheduling-eviction/kube-scheduler/#kube-scheduler-implementation),
respectively.
-->
<p><a class='glossary-tooltip' title='控制平面组件，负责监视新创建的、未指定运行节点的 Pod，选择节点让 Pod 在上面运行。' data-toggle='tooltip' data-placement='top' href='/docs/reference/generated/kube-scheduler/' target='_blank' aria-label='kube-scheduler'>kube-scheduler</a>
根据调度策略指定的<em>断言（predicates）<em>和</em>优先级（priorities）</em>
分别对节点进行<a href="/zh/docs/concepts/scheduling-eviction/kube-scheduler/#kube-scheduler-implementation">过滤和打分</a>。</p>
<!--  
You can set a scheduling policy by running
`kube-scheduler --policy-config-file <filename>` or
`kube-scheduler --policy-configmap <ConfigMap>`
and using the [Policy type](/zh/docs/reference/config-api/kube-scheduler-policy-config.v1/).
-->
<p>你可以通过执行 <code>kube-scheduler --policy-config-file &lt;filename&gt;</code> 或
<code>kube-scheduler --policy-configmap &lt;ConfigMap&gt;</code>
设置并使用<a href="/zh/docs/reference/config-api/kube-scheduler-policy-config.v1/">调度策略</a>。</p>
<!-- body -->
<!-- ## Predicates -->
<h2 id="predicates">断言   </h2>
<!-- The following *predicates* implement filtering: -->
<p>以下<em>断言</em>实现了过滤接口：</p>
<!-- 
- `PodFitsHostPorts`: Checks if a Node has free ports (the network protocol kind)
  for the Pod ports the Pod is requesting. 
-->
<ul>
<li><code>PodFitsHostPorts</code>：检查 Pod 请求的端口（网络协议类型）在节点上是否可用。</li>
</ul>
<!-- - `PodFitsHost`: Checks if a Pod specifies a specific Node by its hostname. -->
<ul>
<li><code>PodFitsHost</code>：检查 Pod 是否通过主机名指定了 Node。</li>
</ul>
<!-- 
- `PodFitsResources`: Checks if the Node has free resources (eg, CPU and Memory)
  to meet the requirement of the Pod.
-->
<ul>
<li><code>PodFitsResources</code>：检查节点的空闲资源（例如，CPU和内存）是否满足 Pod 的要求。</li>
</ul>
<!--  
- `MatchNodeSelector`: Checks if a Pod's Node <a class='glossary-tooltip' title='选择算符允许用户通过标签对一组资源对象进行筛选过滤。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/labels/' target='_blank' aria-label='选择算符（Selector）'>选择算符（Selector）</a>
   matches the Node's <a class='glossary-tooltip' title='用来为对象设置可标识的属性标记；这些标记对用户而言是有意义且重要的。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/labels/' target='_blank' aria-label='label(s)'>label(s)</a>.
-->
<ul>
<li><code>MatchNodeSelector</code>：检查 Pod 的节点<a class='glossary-tooltip' title='选择算符允许用户通过标签对一组资源对象进行筛选过滤。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/labels/' target='_blank' aria-label='选择算符'>选择算符</a>
和节点的 <a class='glossary-tooltip' title='用来为对象设置可标识的属性标记；这些标记对用户而言是有意义且重要的。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/labels/' target='_blank' aria-label='标签'>标签</a> 是否匹配。</li>
</ul>
<!--  
- `NoVolumeZoneConflict`: Evaluate if the <a class='glossary-tooltip' title='包含可被 Pod 中容器访问的数据的目录。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/storage/volumes/' target='_blank' aria-label='Volumes'>Volumes</a>
  that a Pod requests are available on the Node, given the failure zone restrictions for
  that storage.
-->
<ul>
<li><code>NoVolumeZoneConflict</code>：给定该存储的故障区域限制，
评估 Pod 请求的<a class='glossary-tooltip' title='包含可被 Pod 中容器访问的数据的目录。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/storage/volumes/' target='_blank' aria-label='卷'>卷</a>在节点上是否可用。</li>
</ul>
<!--  
- `NoDiskConflict`: Evaluates if a Pod can fit on a Node due to the volumes it requests,
   and those that are already mounted.
-->
<ul>
<li><code>NoDiskConflict</code>：根据 Pod 请求的卷是否在节点上已经挂载，评估 Pod 和节点是否匹配。</li>
</ul>
<!--  
- `MaxCSIVolumeCount`: Decides how many <a class='glossary-tooltip' title='容器存储接口 （CSI）定义了存储系统暴露给容器的标准接口。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/storage/volumes/#csi' target='_blank' aria-label='CSI'>CSI</a>
  volumes should be attached, and whether that's over a configured limit.
-->
<ul>
<li><code>MaxCSIVolumeCount</code>：决定附加 <a class='glossary-tooltip' title='容器存储接口 （CSI）定义了存储系统暴露给容器的标准接口。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/storage/volumes/#csi' target='_blank' aria-label='CSI'>CSI</a> 卷的数量，判断是否超过配置的限制。</li>
</ul>
<!--  
- `CheckNodeMemoryPressure`: If a Node is reporting memory pressure, and there's no
  configured exception, the Pod won't be scheduled there.
-->
<ul>
<li><code>CheckNodeMemoryPressure</code>：如果节点正上报内存压力，并且没有异常配置，则不会把 Pod 调度到此节点上。</li>
</ul>
<!--  
- `CheckNodePIDPressure`: If a Node is reporting that process IDs are scarce, and
  there's no configured exception, the Pod won't be scheduled there.
-->
<ul>
<li><code>CheckNodePIDPressure</code>：如果节点正上报进程 ID 稀缺，并且没有异常配置，则不会把 Pod 调度到此节点上。</li>
</ul>
<!--  
- `CheckNodeDiskPressure`: If a Node is reporting storage pressure (a filesystem that
   is full or nearly full), and there's no configured exception, the Pod won't be
   scheduled there.
-->
<ul>
<li><code>CheckNodeDiskPressure</code>：如果节点正上报存储压力（文件系统已满或几乎已满），并且没有异常配置，则不会把 Pod 调度到此节点上。</li>
</ul>
<!--  
- `CheckNodeCondition`: Nodes can report that they have a completely full filesystem,
  that networking isn't available or that kubelet is otherwise not ready to run Pods.
  If such a condition is set for a Node, and there's no configured exception, the Pod
  won't be scheduled there.
-->
<ul>
<li><code>CheckNodeCondition</code>：节点可用上报自己的文件系统已满，网络不可用或者 kubelet 尚未准备好运行 Pod。
如果节点上设置了这样的状况，并且没有异常配置，则不会把 Pod 调度到此节点上。</li>
</ul>
<!--  
- `PodToleratesNodeTaints`: checks if a Pod's <a class='glossary-tooltip' title='一个核心对象，由三个必需的属性组成：key、value 和 effect。 容忍度允许将 Pod 调度到具有对应污点的节点或节点组上。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/scheduling-eviction/taint-and-toleration/' target='_blank' aria-label='tolerations'>tolerations</a>
  can tolerate the Node's <a class='glossary-tooltip' title='污点是一种一个核心对象，包含三个必需的属性：key、value 和 effect。 污点会阻止在节点或节点组上调度 Pod。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/scheduling-eviction/taint-and-toleration/' target='_blank' aria-label='taints'>taints</a>.
-->
<ul>
<li><code>PodToleratesNodeTaints</code>：检查 Pod 的<a class='glossary-tooltip' title='一个核心对象，由三个必需的属性组成：key、value 和 effect。 容忍度允许将 Pod 调度到具有对应污点的节点或节点组上。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/scheduling-eviction/taint-and-toleration/' target='_blank' aria-label='容忍'>容忍</a>
是否能容忍节点的<a class='glossary-tooltip' title='污点是一种一个核心对象，包含三个必需的属性：key、value 和 effect。 污点会阻止在节点或节点组上调度 Pod。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/scheduling-eviction/taint-and-toleration/' target='_blank' aria-label='污点'>污点</a>。</li>
</ul>
<!-- 
- `CheckVolumeBinding`: Evaluates if a Pod can fit due to the volumes it requests.
  This applies for both bound and unbound
  <a class='glossary-tooltip' title='声明在持久卷中定义的存储资源，以便可以将其挂载为容器中的卷。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/storage/persistent-volumes/' target='_blank' aria-label='PVCs'>PVCs</a>. 
-->
<ul>
<li><code>CheckVolumeBinding</code>：基于 Pod 的卷请求，评估 Pod 是否适合节点，这里的卷包括绑定的和未绑定的
<a class='glossary-tooltip' title='声明在持久卷中定义的存储资源，以便可以将其挂载为容器中的卷。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/storage/persistent-volumes/' target='_blank' aria-label='PVCs'>PVCs</a> 都适用。</li>
</ul>
<!-- ## Priorities -->
<h2 id="priorities">优先级   </h2>
<!-- The following *priorities* implement scoring: -->
<p>以下<em>优先级</em>实现了打分接口：</p>
<!--  
- `SelectorSpreadPriority`: Spreads Pods across hosts, considering Pods that
   belong to the same <a class='glossary-tooltip' title='将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/services-networking/service/' target='_blank' aria-label='Service'>Service</a>,
   <a class='glossary-tooltip' title='StatefulSet 用来管理某 Pod 集合的部署和扩缩，并为这些 Pod 提供持久存储和持久标识符。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/statefulset/' target='_blank' aria-label='StatefulSet'>StatefulSet</a> or
   <a class='glossary-tooltip' title='ReplicaSet 是下一代副本控制器。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/replicaset/' target='_blank' aria-label='ReplicaSet'>ReplicaSet</a>.
-->
<ul>
<li><code>SelectorSpreadPriority</code>：属于同一 <a class='glossary-tooltip' title='将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/services-networking/service/' target='_blank' aria-label='Service'>Service</a>、
<a class='glossary-tooltip' title='StatefulSet 用来管理某 Pod 集合的部署和扩缩，并为这些 Pod 提供持久存储和持久标识符。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/statefulset/' target='_blank' aria-label='StatefulSet'>StatefulSet</a> 或
<a class='glossary-tooltip' title='ReplicaSet 是下一代副本控制器。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/replicaset/' target='_blank' aria-label='ReplicaSet'>ReplicaSet</a> 的 Pod，跨主机部署。</li>
</ul>
<!--  
- `InterPodAffinityPriority`: Implements preferred
  [inter pod affininity and antiaffinity](/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity).
-->
<ul>
<li><code>InterPodAffinityPriority</code>：实现了 <a href="/zh/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity">Pod 间亲和性与反亲和性</a>的优先级。</li>
</ul>
<!--
- `LeastRequestedPriority`: Favors nodes with fewer requested resources. In other
  words, the more Pods that are placed on a Node, and the more resources those
  Pods use, the lower the ranking this policy will give.  
-->
<ul>
<li><code>LeastRequestedPriority</code>：偏向最少请求资源的节点。
换句话说，节点上的 Pod 越多，使用的资源就越多，此策略给出的排名就越低。</li>
</ul>
<!--  
- `MostRequestedPriority`: Favors nodes with most requested resources. This policy
  will fit the scheduled Pods onto the smallest number of Nodes needed to run your
  overall set of workloads.
-->
<ul>
<li><code>MostRequestedPriority</code>：支持最多请求资源的节点。
该策略将 Pod 调度到整体工作负载所需的最少的一组节点上。</li>
</ul>
<!-- - `RequestedToCapacityRatioPriority`: Creates a requestedToCapacity based ResourceAllocationPriority using default resource scoring function shape. -->
<ul>
<li><code>RequestedToCapacityRatioPriority</code>：使用默认的打分方法模型，创建基于 ResourceAllocationPriority 的 requestedToCapacity。</li>
</ul>
<!-- - `BalancedResourceAllocation`: Favors nodes with balanced resource usage. -->
<ul>
<li><code>BalancedResourceAllocation</code>：偏向平衡资源使用的节点。</li>
</ul>
<!-- 
- `NodePreferAvoidPodsPriority`: Prioritizes nodes according to the node annotation
  `scheduler.alpha.kubernetes.io/preferAvoidPods`. You can use this to hint that
  two different Pods shouldn't run on the same Node. 
  -->
<ul>
<li><code>NodePreferAvoidPodsPriority</code>：根据节点的注解 <code>scheduler.alpha.kubernetes.io/preferAvoidPods</code> 对节点进行优先级排序。
你可以使用它来暗示两个不同的 Pod 不应在同一节点上运行。</li>
</ul>
<!--  
- `NodeAffinityPriority`: Prioritizes nodes according to node affinity scheduling
   preferences indicated in PreferredDuringSchedulingIgnoredDuringExecution.
   You can read more about this in [Assigning Pods to Nodes](/docs/concepts/scheduling-eviction/assign-pod-node/).
-->
<ul>
<li><code>NodeAffinityPriority</code>：根据节点亲和中 PreferredDuringSchedulingIgnoredDuringExecution 字段对节点进行优先级排序。
你可以在<a href="/zh/docs/concepts/scheduling-eviction/assign-pod-node/">将 Pod 分配给节点</a>中了解更多。</li>
</ul>
<!--  
- `TaintTolerationPriority`: Prepares the priority list for all the nodes, based on
  the number of intolerable taints on the node. This policy adjusts a node's rank
  taking that list into account.
-->
<ul>
<li><code>TaintTolerationPriority</code>：根据节点上无法忍受的污点数量，给所有节点进行优先级排序。
此策略会根据排序结果调整节点的等级。</li>
</ul>
<!-- 
- `ImageLocalityPriority`: Favors nodes that already have the
  <a class='glossary-tooltip' title='镜像是保存的容器实例，它打包了应用运行所需的一组软件。' data-toggle='tooltip' data-placement='top' href='/zh/docs/reference/glossary/?all=true#term-image' target='_blank' aria-label='container images'>container images</a> for that
  Pod cached locally.
-->
<ul>
<li><code>ImageLocalityPriority</code>：偏向已在本地缓存 Pod 所需容器镜像的节点。</li>
</ul>
<!-- 
- `ServiceSpreadingPriority`: For a given Service, this policy aims to make sure that
  the Pods for the Service run on different nodes. It favours scheduling onto nodes
  that don't have Pods for the service already assigned there. The overall outcome is
  that the Service becomes more resilient to a single Node failure.
-->
<ul>
<li><code>ServiceSpreadingPriority</code>：对于给定的 Service，此策略旨在确保该 Service 关联的 Pod 在不同的节点上运行。
它偏向把 Pod 调度到没有该服务的节点。
整体来看，Service 对于单个节点故障变得更具弹性。</li>
</ul>
<!-- - `EqualPriority`: Gives an equal weight of one to all nodes. -->
<ul>
<li><code>EqualPriority</code>：给予所有节点相等的权重。</li>
</ul>
<!-- 
- `EvenPodsSpreadPriority`: Implements preferred
  [pod topology spread constraints](/docs/concepts/workloads/pods/pod-topology-spread-constraints/). 
-->
<ul>
<li><code>EvenPodsSpreadPriority</code>：实现了 <a href="/zh/docs/concepts/workloads/pods/pod-topology-spread-constraints/">Pod 拓扑扩展约束</a>的优先级排序。</li>
</ul>
<h2 id="接下来">接下来</h2>
<!--  
* Learn about [scheduling](/docs/concepts/scheduling-eviction/kube-scheduler/)
* Learn about [kube-scheduler Configuration](/docs/reference/scheduling/config/)
* Read the [kube-scheduler configuration reference (v1beta1)](/docs/reference/config-api/kube-scheduler-config.v1beta1)
* Read the [kube-scheduler Policy reference (v1)](/docs/reference/config-api/kube-scheduler-policy-config.v1/)
-->
<ul>
<li>了解<a href="/zh/docs/concepts/scheduling-eviction/kube-scheduler/">调度</a></li>
<li>了解 <a href="/zh/docs/reference/scheduling/config/">kube-scheduler 配置</a></li>
<li>阅读 <a href="/zh/docs/reference/config-api/kube-scheduler-config.v1beta1">kube-scheduler 配置参考 (v1beta1)</a></li>
<li>阅读 <a href="/zh/docs/reference/config-api/kube-scheduler-policy-config.v1/">kube-scheduler 策略参考 (v1)</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ef4fb938b6b63c95f5f26f9b1cec3054">2 - 调度器配置</h1>
    
	<!--
title: Scheduler Configuration
content_type: concept
weight: 20
-->





<div style="margin-top: 10px; margin-bottom: 10px;">
<b>FEATURE STATE:</b> <code>Kubernetes v1.19 [beta]</code>
</div>

<!--
You can customize the behavior of the `kube-scheduler` by writing a configuration
file and passing its path as a command line argument.
-->
<p>你可以通过编写配置文件，并将其路径传给 <code>kube-scheduler</code> 的命令行参数，定制 <code>kube-scheduler</code> 的行为。</p>
<!-- overview -->
<!-- body -->
<!--
A scheduling Profile allows you to configure the different stages of scheduling
in the <a class='glossary-tooltip' title='控制平面组件，负责监视新创建的、未指定运行节点的 Pod，选择节点让 Pod 在上面运行。' data-toggle='tooltip' data-placement='top' href='/docs/reference/generated/kube-scheduler/' target='_blank' aria-label='kube-scheduler'>kube-scheduler</a>.
Each stage is exposed in a extension point. Plugins provide scheduling behaviors
by implementing one or more of these extension points.
-->
<p>调度模板（Profile）允许你配置 <a class='glossary-tooltip' title='控制平面组件，负责监视新创建的、未指定运行节点的 Pod，选择节点让 Pod 在上面运行。' data-toggle='tooltip' data-placement='top' href='/docs/reference/generated/kube-scheduler/' target='_blank' aria-label='kube-scheduler'>kube-scheduler</a>
中的不同调度阶段。每个阶段都暴露于某个扩展点中。插件通过实现一个或多个扩展点来提供调度行为。</p>
<!--
You can specify scheduling profiles by running `kube-scheduler --config <filename>`,
using the 
[KubeSchedulerConfiguration (v1beta1)](/docs/reference/config-api/kube-scheduler-config.v1beta1/)
struct.
-->
<p>你可以通过运行 <code>kube-scheduler --config &lt;filename&gt;</code> 来设置调度模板，
使用 <a href="/docs/reference/config-api/kube-scheduler-config.v1beta1/">KubeSchedulerConfiguration (v1beta1)</a> 结构体。</p>
<!-- A minimal configuration looks as follows: -->
<p>最简单的配置如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#008000;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>kubescheduler.config.k8s.io/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>KubeSchedulerConfiguration<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">clientConnection</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">kubeconfig</span>:<span style="color:#bbb"> </span>/etc/srv/kubernetes/kube-scheduler/kubeconfig<span style="color:#bbb">
</span></code></pre></div><!-- ## Profiles -->
<h2 id="profiles">配置文件   </h2>
<!--  
A scheduling Profile allows you to configure the different stages of scheduling
in the <a class='glossary-tooltip' title='控制平面组件，负责监视新创建的、未指定运行节点的 Pod，选择节点让 Pod 在上面运行。' data-toggle='tooltip' data-placement='top' href='/docs/reference/generated/kube-scheduler/' target='_blank' aria-label='kube-scheduler'>kube-scheduler</a>.
Each stage is exposed in an [extension point](#extension-points).
[Plugins](#scheduling-plugins) provide scheduling behaviors by implementing one
or more of these extension points.
-->
<p>通过调度配置文件，你可以配置 <a class='glossary-tooltip' title='控制平面组件，负责监视新创建的、未指定运行节点的 Pod，选择节点让 Pod 在上面运行。' data-toggle='tooltip' data-placement='top' href='/docs/reference/generated/kube-scheduler/' target='_blank' aria-label='kube-scheduler'>kube-scheduler</a> 在不同阶段的调度行为。
每个阶段都在一个<a href="#extension-points">扩展点</a>中公开。
<a href="#scheduling-plugins">调度插件</a>通过实现一个或多个扩展点，来提供调度行为。</p>
<!--  
You can configure a single instance of `kube-scheduler` to run
[multiple profiles](#multiple-profiles).
-->
<p>你可以配置同一 <code>kube-scheduler</code> 实例使用<a href="#multiple-profiles">多个配置文件</a>。</p>
<!-- ### Extension points -->
<h3 id="extensions-points">扩展点   </h3>
<!--  
Scheduling happens in a series of stages that are exposed through the following
extension points:
-->
<p>调度行为发生在一系列阶段中，这些阶段是通过以下扩展点公开的：</p>
<!--  
1. `QueueSort`: These plugins provide an ordering function that is used to
   sort pending Pods in the scheduling queue. Exactly one queue sort plugin
   may be enabled at a time.
-->
<ol>
<li><code>QueueSort</code>：这些插件对调度队列中的悬决的 Pod 排序。
一次只能启用一个队列排序插件。</li>
</ol>
<!--
2. `PreFilter`: These plugins are used to pre-process or check information
   about a Pod or the cluster before filtering. They can mark a pod as
   unschedulable.
 -->
<ol start="2">
<li><code>PreFilter</code>：这些插件用于在过滤之前预处理或检查 Pod 或集群的信息。
它们可以将 Pod 标记为不可调度。</li>
</ol>
<!--
3. `Filter`: These plugins are the equivalent of Predicates in a scheduling
   Policy and are used to filter out nodes that can not run the Pod. Filters
   are called in the configured order. A pod is marked as unschedulable if no
   nodes pass all the filters.
-->
<ol start="3">
<li><code>Filter</code>：这些插件相当于调度策略中的断言（Predicates），用于过滤不能运行 Pod 的节点。
过滤器的调用顺序是可配置的。
如果没有一个节点通过所有过滤器的筛选，Pod 将会被标记为不可调度。</li>
</ol>
<!--
4. `PreScore`: This is an informational extension point that can be used
   for doing pre-scoring work.
-->
<ol start="4">
<li><code>PreScore</code>：这是一个信息扩展点，可用于预打分工作。</li>
</ol>
<!--  
5. `Score`: These plugins provide a score to each node that has passed the
   filtering phase. The scheduler will then select the node with the highest
   weighted scores sum.
-->
<ol start="5">
<li><code>Score</code>：这些插件给通过筛选阶段的节点打分。调度器会选择得分最高的节点。</li>
</ol>
<!--  
6. `Reserve`: This is an informational extension point that notifies plugins
   when resources have been reserved for a given Pod. Plugins also implement an
   `Unreserve` call that gets called in the case of failure during or after
   `Reserve`.
-->
<ol start="6">
<li><code>Reserve</code>：这是一个信息扩展点，当资源已经预留给 Pod 时，会通知插件。
这些插件还实现了 <code>Unreserve</code> 接口，在 <code>Reserve</code> 期间或之后出现故障时调用。</li>
</ol>
<!-- 7. `Permit`: These plugins can prevent or delay the binding of a Pod. -->
<ol start="7">
<li><code>Permit</code>：这些插件可以阻止或延迟 Pod 绑定。</li>
</ol>
<!-- 8. `PreBind`: These plugins perform any work required before a Pod is bound.-->
<ol start="8">
<li><code>PreBind</code>：这些插件在 Pod 绑定节点之前执行。</li>
</ol>
<!--  
9. `Bind`: The plugins bind a Pod to a Node. Bind plugins are called in order
   and once one has done the binding, the remaining plugins are skipped. At
   least one bind plugin is required.
-->
<ol start="9">
<li><code>Bind</code>：这个插件将 Pod 与节点绑定。绑定插件是按顺序调用的，只要有一个插件完成了绑定，其余插件都会跳过。绑定插件至少需要一个。</li>
</ol>
<!--
10. `PostBind`: This is an informational extension point that is called after
   a Pod has been bound.
-->
<ol start="10">
<li><code>PostBind</code>：这是一个信息扩展点，在 Pod 绑定了节点之后调用。</li>
</ol>
<!--
For each extension point, you could disable specific [default plugins](#scheduling-plugins)
or enable your own. For example:
-->
<p>对每个扩展点，你可以禁用<a href="#scheduling-plugins">默认插件</a>或者是启用自己的插件，例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#008000;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>kubescheduler.config.k8s.io/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>KubeSchedulerConfiguration<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">profiles</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">plugins</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#008000;font-weight:bold">score</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">disabled</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>NodeResourcesLeastAllocated<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">enabled</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>MyCustomPluginA<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">weight</span>:<span style="color:#bbb"> </span><span style="color:#666">2</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>MyCustomPluginB<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">weight</span>:<span style="color:#bbb"> </span><span style="color:#666">1</span><span style="color:#bbb">
</span></code></pre></div><!--
You can use `*` as name in the disabled array to disable all default plugins
for that extension point. This can also be used to rearrange plugins order, if
desired.
-->
<p>你可以在 <code>disabled</code> 数组中使用 <code>*</code> 禁用该扩展点的所有默认插件。
如果需要，这个字段也可以用来对插件重新顺序。</p>
<!-- ### Scheduling plugins -->
<h3 id="scheduling-plugin">调度插件   </h3>
<!--
1. `UnReserve`: This is an informational extension point that is called if
   a Pod is rejected after being reserved and put on hold by a `Permit` plugin.
-->
<ol>
<li><code>UnReserve</code>：这是一个信息扩展点，如果一个 Pod 在预留后被拒绝，并且被 <code>Permit</code> 插件搁置，它就会被调用。</li>
</ol>
<!-- ## Scheduling plugins -->
<h2 id="scheduling-plugins">调度插件  </h2>
<!--  
The following plugins, enabled by default, implement one or more of these
extension points:
-->
<p>下面默认启用的插件实现了一个或多个扩展点：</p>
<!--  
- `SelectorSpread`: Favors spreading across nodes for Pods that belong to
  <a class='glossary-tooltip' title='将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/services-networking/service/' target='_blank' aria-label='Services'>Services</a>,
  <a class='glossary-tooltip' title='ReplicaSet 是下一代副本控制器。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/replicaset/' target='_blank' aria-label='ReplicaSets'>ReplicaSets</a> and
  <a class='glossary-tooltip' title='StatefulSet 用来管理某 Pod 集合的部署和扩缩，并为这些 Pod 提供持久存储和持久标识符。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/statefulset/' target='_blank' aria-label='StatefulSets'>StatefulSets</a>.
  Extension points: `PreScore`, `Score`.
-->
<ul>
<li>
<p><code>SelectorSpread</code>：对于属于 <a class='glossary-tooltip' title='将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/services-networking/service/' target='_blank' aria-label='Services'>Services</a>、
<a class='glossary-tooltip' title='ReplicaSet 是下一代副本控制器。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/replicaset/' target='_blank' aria-label='ReplicaSets'>ReplicaSets</a> 和
<a class='glossary-tooltip' title='StatefulSet 用来管理某 Pod 集合的部署和扩缩，并为这些 Pod 提供持久存储和持久标识符。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/workloads/controllers/statefulset/' target='_blank' aria-label='StatefulSets'>StatefulSets</a> 的 Pod，偏好跨多个节点部署。</p>
<p>实现的扩展点：<code>PreScore</code>，<code>Score</code>。</p>
</li>
</ul>
<!--  
- `ImageLocality`: Favors nodes that already have the container images that the
  Pod runs.
  Extension points: `Score`.
-->
<ul>
<li>
<p><code>ImageLocality</code>：选择已经存在 Pod 运行所需容器镜像的节点。</p>
<p>实现的扩展点：<code>Score</code>。</p>
</li>
</ul>
<!--  
- `TaintToleration`: Implements
  [taints and tolerations](/docs/concepts/scheduling-eviction/taint-and-toleration/).
  Implements extension points: `Filter`, `Prescore`, `Score`.
-->
<ul>
<li>
<p><code>TaintToleration</code>：实现了<a href="/zh/docs/concepts/scheduling-eviction/taint-and-toleration/">污点和容忍</a>。</p>
<p>实现的扩展点：<code>Filter</code>，<code>Prescore</code>，<code>Score</code>。</p>
</li>
</ul>
<!--  
- `NodeName`: Checks if a Pod spec node name matches the current node.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>NodeName</code>：检查 Pod 指定的节点名称与当前节点是否匹配。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `NodePorts`: Checks if a node has free ports for the requested Pod ports.
  Extension points: `PreFilter`, `Filter`.
-->
<ul>
<li>
<p><code>NodePorts</code>：检查 Pod 请求的端口在节点上是否可用。</p>
<p>实现的扩展点：<code>PreFilter</code>，<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `NodePreferAvoidPods`: Scores nodes according to the node
  <a class='glossary-tooltip' title='注解是以键值对的形式给资源对象附加随机的无法标识的元数据。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/annotations/' target='_blank' aria-label=' '> </a>
  `scheduler.alpha.kubernetes.io/preferAvoidPods`.
  Extension points: `Score`.
-->
<ul>
<li>
<p><code>NodePreferAvoidPods</code>：基于节点的 <a class='glossary-tooltip' title='注解是以键值对的形式给资源对象附加随机的无法标识的元数据。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/annotations/' target='_blank' aria-label='注解'>注解</a>
<code>scheduler.alpha.kubernetes.io/preferAvoidPods</code> 打分。</p>
<p>实现的扩展点：<code>Score</code>。</p>
</li>
</ul>
<!--  
- `NodeAffinity`: Implements
  [node selectors](/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector)
  and [node affinity](/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity).
  Extension points: `Filter`, `Score`.
-->
<ul>
<li>
<p><code>NodeAffinity</code>：实现了<a href="/zh/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector">节点选择器</a>
和<a href="/zh/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity">节点亲和性</a>。</p>
<p>实现的扩展点：<code>Filter</code>，<code>Score</code>.</p>
</li>
</ul>
<!--  
- `PodTopologySpread`: Implements
  [Pod topology spread](/docs/concepts/workloads/pods/pod-topology-spread-constraints/).
  Extension points: `PreFilter`, `Filter`, `PreScore`, `Score`.
-->
<ul>
<li>
<p><code>PodTopologySpread</code>：实现了 <a href="/zh/docs/concepts/workloads/pods/pod-topology-spread-constraints/">Pod 拓扑分布</a>。</p>
<p>实现的扩展点：<code>PreFilter</code>，<code>Filter</code>，<code>PreScore</code>，<code>Score</code>。</p>
</li>
</ul>
<!--  
- `NodeUnschedulable`: Filters out nodes that have `.spec.unschedulable` set to
  true.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>NodeUnschedulable</code>：过滤 <code>.spec.unschedulable</code> 值为 true 的节点。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `NodeResourcesFit`: Checks if the node has all the resources that the Pod is
  requesting.
  Extension points: `PreFilter`, `Filter`.
-->
<ul>
<li>
<p><code>NodeResourcesFit</code>：检查节点是否拥有 Pod 请求的所有资源。</p>
<p>实现的扩展点：<code>PreFilter</code>，<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `NodeResourcesBalancedAllocation`: Favors nodes that would obtain a more
  balanced resource usage if the Pod is scheduled there.
  Extension points: `Score`.
-->
<ul>
<li>
<p><code>NodeResourcesBalancedAllocation</code>：调度 Pod 时，选择资源使用更为均衡的节点。</p>
<p>实现的扩展点：<code>Score</code>。</p>
</li>
</ul>
<!--  
- `NodeResourcesLeastAllocated`: Favors nodes that have a low allocation of
  resources.
  Extension points: `Score`.
-->
<ul>
<li>
<p><code>NodeResourcesLeastAllocated</code>：选择资源分配较少的节点。</p>
<p>实现的扩展点：<code>Score</code>。</p>
</li>
</ul>
<!--  
- `VolumeBinding`: Checks if the node has or if it can bind the requested
  <a class='glossary-tooltip' title='包含可被 Pod 中容器访问的数据的目录。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/storage/volumes/' target='_blank' aria-label='volumes'>volumes</a>.
  Extension points: `PreFilter`, `Filter`, `Reserve`, `PreBind`, `Score`.
  <blockquote class="note callout">
  <div><strong>说明：</strong> <code>Score</code> extension point is enabled when <code>VolumeCapacityPriority</code> feature is
enabled. It prioritizes the smallest PVs that can fit the requested volume
size.</div>
</blockquote>
-->
<ul>
<li><code>VolumeBinding</code>：检查节点是否有请求的卷，或是否可以绑定请求的卷。
实现的扩展点: <code>PreFilter</code>、<code>Filter</code>、<code>Reserve</code>、<code>PreBind</code> 和 <code>Score</code>。
<blockquote class="note callout">
  <div><strong>说明：</strong> 当 <code>VolumeCapacityPriority</code> 特性被启用时，<code>Score</code> 扩展点也被启用。
它优先考虑可以满足所需卷大小的最小 PV。</div>
</blockquote></li>
</ul>
<!--
- `VolumeRestrictions`: Checks that volumes mounted in the node satisfy
  restrictions that are specific to the volume provider.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>VolumeRestrictions</code>：检查挂载到节点上的卷是否满足卷提供程序的限制。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `VolumeZone`: Checks that volumes requested satisfy any zone requirements they
  might have.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>VolumeZone</code>：检查请求的卷是否在任何区域都满足。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--
- `NodeVolumeLimits`: Checks that CSI volume limits can be satisfied for the
  node.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>NodeVolumeLimits</code>：检查该节点是否满足 CSI 卷限制。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `EBSLimits`: Checks that AWS EBS volume limits can be satisfied for the node.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>EBSLimits</code>：检查节点是否满足 AWS EBS 卷限制。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `GCEPDLimits`: Checks that GCP-PD volume limits can be satisfied for the node.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>GCEPDLimits</code>：检查该节点是否满足 GCP-PD 卷限制。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `AzureDiskLimits`: Checks that Azure disk volume limits can be satisfied for
  the node.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>AzureDiskLimits</code>：检查该节点是否满足 Azure 卷限制。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `InterPodAffinity`: Implements
  [inter-Pod affinity and anti-affinity](/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity).
  Extension points: `PreFilter`, `Filter`, `PreScore`, `Score`.
-->
<ul>
<li>
<p><code>InterPodAffinity</code>：实现 <a href="/zh/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity">Pod 间亲和性与反亲和性</a>。</p>
<p>实现的扩展点：<code>PreFilter</code>，<code>Filter</code>，<code>PreScore</code>，<code>Score</code>。</p>
</li>
</ul>
<!--  
- `PrioritySort`: Provides the default priority based sorting.
  Extension points: `QueueSort`.
-->
<ul>
<li>
<p><code>PrioritySort</code>：提供默认的基于优先级的排序。</p>
<p>实现的扩展点：<code>QueueSort</code>。</p>
</li>
</ul>
<!--  
- `DefaultBinder`: Provides the default binding mechanism.
  Extension points: `Bind`.
-->
<ul>
<li>
<p><code>DefaultBinder</code>：提供默认的绑定机制。</p>
<p>实现的扩展点：<code>Bind</code>。</p>
</li>
</ul>
<!--  
- `DefaultPreemption`: Provides the default preemption mechanism.
  Extension points: `PostFilter`.
-->
<ul>
<li>
<p><code>DefaultPreemption</code>：提供默认的抢占机制。</p>
<p>实现的扩展点：<code>PostFilter</code>。</p>
</li>
</ul>
<!--  
You can also enable the following plugins, through the component config APIs,
that are not enabled by default:
-->
<p>你也可以通过组件配置 API 启用以下插件（默认不启用）:</p>
<!--  
- `NodeResourcesMostAllocated`: Favors nodes that have a high allocation of
  resources.
  Extension points: `Score`.
-->
<ul>
<li>
<p><code>NodeResourcesMostAllocated</code>：选择已分配资源多的节点。</p>
<p>实现的扩展点：<code>Score</code>。</p>
</li>
</ul>
<!--  
- `RequestedToCapacityRatio`: Favor nodes according to a configured function of
  the allocated resources.
  Extension points: `Score`.
-->
<ul>
<li>
<p><code>RequestedToCapacityRatio</code>：根据已分配资源的某函数设置选择节点。</p>
<p>实现的扩展点：<code>Score</code>。</p>
</li>
</ul>
<!--  
- `CinderVolume`: Checks that OpenStack Cinder volume limits can be satisfied
  for the node.
  Extension points: `Filter`.
-->
<ul>
<li>
<p><code>CinderVolume</code>：检查该节点是否满足 OpenStack Cinder 卷限制。</p>
<p>实现的扩展点：<code>Filter</code>。</p>
</li>
</ul>
<!--  
- `NodeLabel`: Filters and / or scores a node according to configured
  <a class='glossary-tooltip' title='用来为对象设置可标识的属性标记；这些标记对用户而言是有意义且重要的。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/labels/' target='_blank' aria-label='label(s)'>label(s)</a>.
  Extension points: `Filter`, `Score`.
-->
<ul>
<li>
<p><code>NodeLabel</code>：根据配置的 <a class='glossary-tooltip' title='用来为对象设置可标识的属性标记；这些标记对用户而言是有意义且重要的。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/overview/working-with-objects/labels/' target='_blank' aria-label='标签'>标签</a>
过滤节点和/或给节点打分。</p>
<p>实现的扩展点：<code>Filter</code>，<code>Score</code>。</p>
</li>
</ul>
<!--  
- `ServiceAffinity`: Checks that Pods that belong to a
  <a class='glossary-tooltip' title='将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/services-networking/service/' target='_blank' aria-label='服务（Service）'>服务（Service）</a> fit in a set of nodes defined by
  configured labels. This plugin also favors spreading the Pods belonging to a
  Service across nodes.
  Extension points: `PreFilter`, `Filter`, `Score`.
-->
<ul>
<li>
<p><code>ServiceAffinity</code>：检查属于某个 <a class='glossary-tooltip' title='将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。' data-toggle='tooltip' data-placement='top' href='/zh/docs/concepts/services-networking/service/' target='_blank' aria-label='服务（Service）'>服务（Service）</a> 的 Pod
与配置的标签所定义的节点集是否适配。
这个插件还支持将属于某个 Service 的 Pod 分散到各个节点。</p>
<p>实现的扩展点：<code>PreFilter</code>，<code>Filter</code>，<code>Score</code>。</p>
</li>
</ul>
<!-- ### Multiple profiles -->
<h3 id="multiple-profiles">多配置文件   </h3>
<!--  
You can configure `kube-scheduler` to run more than one profile.
Each profile has an associated scheduler name and can have a different set of
plugins configured in its [extension points](#extension-points).
-->
<p>你可以配置 <code>kube-scheduler</code> 运行多个配置文件。
每个配置文件都有一个关联的调度器名称，并且可以在其扩展点中配置一组不同的插件。</p>
<!--  
With the following sample configuration, the scheduler will run with two
profiles: one with the default plugins and one with all scoring plugins
disabled.
-->
<p>使用下面的配置样例，调度器将运行两个配置文件：一个使用默认插件，另一个禁用所有打分插件。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#008000;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>kubescheduler.config.k8s.io/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>KubeSchedulerConfiguration<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">profiles</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">schedulerName</span>:<span style="color:#bbb"> </span>default-scheduler<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">schedulerName</span>:<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">no</span>-scoring-scheduler<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">plugins</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#008000;font-weight:bold">preScore</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">disabled</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#39;*&#39;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#008000;font-weight:bold">score</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">disabled</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#39;*&#39;</span><span style="color:#bbb">
</span></code></pre></div><!--  
Pods that want to be scheduled according to a specific profile can include
the corresponding scheduler name in its `.spec.schedulerName`.
-->
<p>对于那些希望根据特定配置文件来进行调度的 Pod，可以在 <code>.spec.schedulerName</code> 字段指定相应的调度器名称。</p>
<!--  
By default, one profile with the scheduler name `default-scheduler` is created.
This profile includes the default plugins described above. When declaring more
than one profile, a unique scheduler name for each of them is required.
-->
<p>默认情况下，将创建一个调度器名为 <code>default-scheduler</code> 的配置文件。
这个配置文件包括上面描述的所有默认插件。
声明多个配置文件时，每个配置文件中调度器名称必须唯一。</p>
<!--  
If a Pod doesn't specify a scheduler name, kube-apiserver will set it to
`default-scheduler`. Therefore, a profile with this scheduler name should exist
to get those pods scheduled.
-->
<p>如果 Pod 未指定调度器名称，kube-apiserver 将会把调度器名设置为 <code>default-scheduler</code>。
因此，应该存在一个调度器名为 <code>default-scheduler</code> 的配置文件来调度这些 Pod。</p>
<blockquote class="note callout">
  <div><strong>说明：</strong> <!--  
Pod's scheduling events have `.spec.schedulerName` as the ReportingController.
Events for leader election use the scheduler name of the first profile in the
list.
-->
<p>Pod 的调度事件把 <code>.spec.schedulerName</code> 字段值作为 ReportingController。
领导者选举事件使用列表中第一个配置文件的调度器名称。</div>
</blockquote>
<blockquote class="note callout">
  <div><strong>说明：</strong> <!--  
All profiles must use the same plugin in the QueueSort extension point and have
the same configuration parameters (if applicable). This is because the scheduler
only has one pending pods queue.
-->
<p>所有配置文件必须在 QueueSort 扩展点使用相同的插件，并具有相同的配置参数（如果适用）。
这是因为调度器只有一个保存 pending 状态 Pod 的队列。</div>
</blockquote>
<h2 id="接下来">接下来</h2>
<!--  
* Read the [kube-scheduler reference](https://kubernetes.io/docs/reference/command-line-tools-reference/kube-scheduler/)
* Learn about [scheduling](/docs/concepts/scheduling-eviction/kube-scheduler/)
* Read the [kube-scheduler configuration (v1beta1)](/docs/reference/config-api/kube-scheduler-config.v1beta1/) reference
-->
<ul>
<li>阅读 <a href="/zh/docs/reference/command-line-tools-reference/kube-scheduler/">kube-scheduler 参考</a></li>
<li>了解<a href="/zh/docs/concepts/scheduling-eviction/kube-scheduler/">调度</a></li>
<li>阅读 <a href="/zh/docs/reference/config-api/kube-scheduler-config.v1beta1/">kube-scheduler 配置 (v1beta1)</a> 参考</li>
</ul>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="d-print-none">
  <div class="footer__links">
    <nav>
      
      
      
      <a class="text-white" href="/zh/docs/home/">主页</a>
      
      <a class="text-white" href="/zh/blog/">博客</a>
      
      <a class="text-white" href="/zh/training/">培训</a>
      
      <a class="text-white" href="/zh/partners/">合作伙伴</a>
      
      <a class="text-white" href="/zh/community/">社区</a>
      
      <a class="text-white" href="/zh/case-studies/">案例分析</a>
      
    </nav>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-6 col-sm-2 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" href="https://discuss.kubernetes.io">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" href="https://twitter.com/kubernetesio">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Calendar" aria-label="Calendar">
    <a class="text-white" target="_blank" href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io">
      <i class="fas fa-calendar-alt"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Youtube" aria-label="Youtube">
    <a class="text-white" target="_blank" href="https://youtube.com/kubernetescommunity">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-2 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/kubernetes/kubernetes">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="https://slack.k8s.io">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Contribute" aria-label="Contribute">
    <a class="text-white" target="_blank" href="https://git.k8s.io/community/contributors/guide">
      <i class="fas fa-edit"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" href="https://stackoverflow.com/questions/tagged/kubernetes">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-8 text-center order-sm-2">
        <small class="text-white">&copy; 2021 The Kubernetes 作者 | 文档发布基于 <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a> 授权许可</small>
        <br/>
        <small class="text-white">Copyright &copy; 2021 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">商标使用页面</a></small>
        <br/>
        <small class="text-white">ICP license: 京ICP备17074266号-3</small>
        
        
          
        
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="/js/popper-1.14.3.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="/js/bootstrap-4.3.1.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>











<script src="/js/main.min.40616251a9b6e4b689e7769be0340661efa4d7ebb73f957404e963e135b4ed52.js" integrity="sha256-QGFiUam25LaJ53ab4DQGYe&#43;k1&#43;u3P5V0BOlj4TW07VI=" crossorigin="anonymous"></script>






  </body>
</html>
